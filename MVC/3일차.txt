
 3일차 - 15 ~ 22강.



 # 페이지 모듈 분리하기.

설명.
View에서 중복되는 header, footer를 WEB-INF안에 폴더를 생성해서 jsp파일로 만들어준다.
모든 view에서 중복되면 WEB-INF안에 폴더 하나에 넣어준다.
일부 view에서 중복되면 WEB-INF안에 전체 폴더와 구분하여 새로운 폴더를 생성하여 넣어준다.



 # Tiles 지시서 작성하기.

Tiles 설정하기.
tiles.apache.org 사이트접속 -> Documentation -> Tiles 3.0.x -> tutorials -> Creating Tiles Pages.
-> WEB-INF안에 tiles.xml 파일 만들기 -> 라이브러리 복사 붙여넣기.

tiles.xml 설정.
<tiles-definitions>
	<definition name="모델 뷰 경로" template="layout.jsp">
		<put-attribute name="변수이름" value="중복된 소스파일을 정리한 view.jsp 경로">
		<put-attribute name="변수이름" value="중복된 소스파일을 정리한 view.jsp 경로">
		....
	</definition>
</tiles-definitions>



 # 레이아웃 페이지 만들기와 Tiles 라이브러리 설정하기.

Tiles 라이브러리 Maven 설정.
pom.xml -> Dependencies -> Add -> tiles 검색 -> org.apache.tiles ( tiles-jsp ) -> 저장.

layout.jsp파일 설정.
<%@ taglib prefix="tiles" uri="~~~~~~/tags-tiles" %>
<tiles:getAsString name="titles.xml에서 지정한 변수이름( value를 String으로 설정한 경우 )" />
<tiles:insertAttribute name="tiles.xml에서 지정한 변수이름" />



 # Tiles ViewResolver 설정하기.

jstl 라이브러리 설정. ( pom.xml )
pom.xml -> Dependencies -> Add -> jstl 찾기 -> javax.servlet ( jstl ) -> 저장.

dispatcher-servlet.xml 설정.
<bean class="org.springframework.web.servlet.view.UrlBasedViewResolver">
	<property name="viewClass" 
		value="org.springframework.web.servlet.view.tiles3.TilesView />
	<property name="order" value="1" />
</bean>
<bean class="org.springframework.web.servlet.view.tiles3.TilesConfigurer">
	<property name="definitions" value="/경로/tiles.xml" />
</bean>



 # Tiles 설정에 Wildcard 이용하기.

설명.
tiles.xml에서 설정한 footer, header 정보들의 중복이 너무 많이 되서 작성이 힘들다.
와일드 카드를 통해 쉽게 작성할 수 있도록 만든다.

사용.
<definition name="notice.*.*" template="경로" >
	<put-attribute name="body" value="경로/{1}/{2}.jsp" />
</definition>

추가설명.
name에 경로를 *로 처리하고 {숫자}를 통해 * 앞에서부터 들어온 값을 사용할 수 있다.



 # Root 페이지들을 위한 Layout 페이지 만들기.

설명.
Tiles에 여러 종류의 definition을 만들 때 일반 경로로 만들게되면 상위디렉토리만 선택되는 오류발생.
이 오류를 해결하기 위해 root.~~라는 표시를 통해 상위폴더를 지정해준다.

사용.
Controller에 ModelAndView( "root.경로" ) ;
<definition name="root.*" tmplate="클래스경로" >
	<put-attribute name="body" value="경로/{1}.jsp" />
</definition>



 # Service 객체 사용하기.

oracle jdbc 드라이버 설정.
pom.xml -> Dependencies -> Add -> oracle 검색 -> com.oracle.database.jdbc ( ojdbc원하는버전 )

dispatcher-servlet.xml 설정.
<bean id="변수이름" class="패키지이름.클래스이름" />
<bean id="url이름" class="변수를사용할클래스이름" >
	<property name="세터메소드이름" ref="변수이름" />
</bean>



